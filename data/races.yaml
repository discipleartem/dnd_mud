# Расы Dungeons & Dragons 5e
# Базовые расы из Player's Handbook

races:
  human:
    name: "Человек"
    description: "Человечество - самая разнообразная и амбициозная раса"
    ability_bonuses:
      strength: 1
      dexterity: 1
      constitution: 1
      intelligence: 1
      wisdom: 1
      charisma: 1
    ability_bonuses_description: "Все характеристики +1"
    size: "medium"
    speed: 30
    age:
      min: 16
      max: 100
    languages: ["common"]
    features:
      - name: "Дополнительный язык"
        description: "Можно выучить один дополнительный язык по выбору"
        mechanics:
          type: "language"
          count: 1
          choice: true
    allow_base_race_choice: true  # Можно выбрать базовую расу
    
    subraces:
      variant_human:
        name: "Человек (вариант)"
        description: "Альтернативный вариант создания человека с выбором характеристик, навыков и черт"
        ability_bonuses: {}
        ability_bonuses_description: "2 характеристики +1"
        inherit_base_abilities: false
        features:
          - name: "Увеличение характеристик"
            description: "Значение двух характеристик на ваш выбор увеличивается на 1"
            mechanics:
              type: "ability_bonus"
              target: "choice"
              count: 2
              value: 1
              choice: true
          - name: "Навыки"
            description: "Вы получаете владение одним навыком на ваш выбор"
            mechanics:
              type: "skill_proficiency"
              count: 1
              choice: true
          - name: "Черта"
            description: "Вы получаете одну черту на ваш выбор"
            mechanics:
              type: "feat"
              count: 1
              choice: true
    
  elf:
    name: "Эльф"
    description: "Эльфы - изящные и долгоживущие существа с тонкими чувствами. Особенности: Внимательность, Тёмное зрение, Наследие фей, Мастерство оружия, Транс"
    ability_bonuses:
      dexterity: 2
    ability_bonuses_description: "Ловкость +2"
    size: "medium"
    speed: 30
    age:
      min: 20
      max: 750
    languages: ["common", "elvish"]
    allow_base_race_choice: false  # Нельзя выбрать базовую расу, только подрасы
    features:
      - name: "Обострённые чувства"
        description: "Вы владеете навыком Внимательность."
        mechanics:
          type: "skill_proficiency"
          skills: ["perception"]

      - name: "Тёмное зрение"
        description: "Может видеть в условиях слабого освещения на расстоянии 60 футов как в ярком освещении"
        mechanics:
          type: "darkvision"
          range: 60

      - name: "Наследие фей"
        description: "Преимущество при спасбросках от очарования"
        mechanics:
          type: "advantage"
          save: "charisma"
          effect: "charm"

      - name: "Транс"
        description: "Медитация вместо сна. 4 часа медитации дают тот же отдых, что и 8 часов сна"
        mechanics:
          type: "rest"
          duration: 4
          effect: "full_rest"

    subraces:
      high_elf:
        name: "Высший эльф"
        ability_bonuses:
          intelligence: 1
        ability_bonuses_description: "Интеллект +1"
        languages: []
        features:
          - name: "Дополнительный язык"
            description: "Можно выучить один дополнительный язык по выбору"
            mechanics:
              type: "language"
              count: 1
              choice: true
          - name: "Заговор высшего эльфа"
            description: "Вы знаете один заговор из списка волшебника. Интеллект — ваша базовая характеристика для него"
            mechanics:
              type: "cantrip"
              source: "wizard"
              ability: "intelligence"
              count: 1
              choice: true

      wood_elf:
        name: "Лесной эльф"
        ability_bonuses:
          wisdom: 1
        ability_bonuses_description: "Мудрость +1"
        features:
          - name: "Мастерство оружия лесного эльфа"
            description: "Владение длинными мечами, рапирами, короткими мечами, длинными и короткими луками"
            mechanics:
              type: "weapon_proficiency"
              weapons: ["longsword", "rapier", "shortsword", "longbow", "shortbow"]
          - name: "Быстрота лесного эльфа"
            description: "Базовая скорость передвижения 35 футов"
            mechanics:
              type: "speed_bonus"
              value: 35
          - name: "Маскировка лесного эльфа"
            description: "Преимущество при проверках Ловкости (Скрытность) в лесистой местности"
            mechanics:
              type: "advantage"
              skill: "stealth"
              terrain: "forest"

    
  half_orc:
    name: "Полуорк"
    description: "Полуорки - сильные и выносливые воины"
    ability_bonuses:
      strength: 2
      constitution: 1
    ability_bonuses_description: "Сила +2, Телосложение +1"
    size: "medium"
    speed: 30
    age:
      min: 14
      max: 80
    languages: ["common", "orcish"]
    features:
      - name: "Непреклонность"
        description: "Преимущество при спасбросках Силы от эффекта испуга"
        mechanics:
          type: "advantage"
          save: "strength"
          effect: "frightened"
      - name: "Орская стойкость"
        description: "Врождённое владение атлетикой"
        mechanics:
          type: "skill_proficiency"
          skills: ["athletics"]
      - name: "Жестокость"
        description: "Когда урон снижает ваши хиты до 0, вы остаётесь с 1 хитом"
        mechanics:
          type: "persistent_endurance"
          trigger: "damage_reduces_to_zero"
          effect: "remain_at_1_hp"
      - name: "Полуоркская выносливость"
        description: "Увеличенные хиты на каждом уровне"
        mechanics:
          type: "hit_point_bonus"
          value: 1
          per_level: true