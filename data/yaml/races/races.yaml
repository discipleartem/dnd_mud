# Расы D&D MUD - Универсальная структура
# 
# Эта структура поддерживает:
# - Модификации через inheritance
# - Универсальные бонусы и особенности
# - Легкое добавление новых рас и подрас
# - Композицию особенностей

# Базовые шаблоны особенностей
templates:
  # Шаблон для выбора характеристик
  ability_choice_template:
    type: "ability_choice"
    description_template: "Выберите {max_choices} характеристик на ваш выбор (+{bonus_value} к каждой)"
    max_choices: 1
    bonus_value: 1
    allowed_attributes: ["strength", "dexterity", "constitution", "intelligence", "wisdom", "charisma"]
  
  # Шаблон для выбора навыков
  skill_choice_template:
    type: "skill_choice"
    description_template: "Выберите {max_choices} навыков на ваш выбор"
    max_choices: 1
    skills: []  # Заполняется при необходимости
  
  # Шаблон для черт
  feat_choice_template:
    type: "feat_choice"
    description: "Выберите одну черту на ваш выбор"
    feat: null  # Заполняется при необходимости

# Расы
races:
  human:
    name: "Человек"
    description: "Самые адаптивные и амбициозные существа в этом мире. Люди живут короткими жизнями по сравнению с другими расами, но именно они строят великие империи, совершают невероятные открытия и меняют ход истории. Их универсальность и неутомимая энергия позволяют им преуспеть в любом деле - от могущественных магов до отважных воинов и хитрых плутов. Люди известны своим разнообразием культур, верований и стремлением оставить свой след в мире."
    
    # Базовые бонусы
    bonuses:
      strength: 1
      dexterity: 1
      constitution: 1
      intelligence: 1
      wisdom: 1
      charisma: 1
    
    # Особенности (универсальные для всех подрас)
    features: []
    
    # Подрасы
    subraces:
      standard:
        name: "Человек"
        description: "Стандартный человек с универсальными бонусами ко всем характеристикам."
        inherit_bonuses: true  # Наследует бонусы от родительской расы
        features: []
      
      variant:
        name: "Человек (Альтернатива)"
        description: "Человек, который не следует общим путем, а выбирает собственную дорогу к совершенству. Получает гибкость в развитии характеристик, дополнительный навык и черту."
        inherit_bonuses: false  # Не наследует бонусы, использует свои
        
        # Бонусы подрасы
        bonuses: {}
        
        # Особенности подрасы
        features:
          - type: "ability_choice"
            name: "Увеличение характеристик"
            description: "Выберите 2 любые характеристики (+1 к каждой)"
            max_choices: 2
            bonus_value: 1
            allowed_attributes: ["strength", "dexterity", "constitution", "intelligence", "wisdom", "charisma"]
          
          - type: "skill_choice"
            name: "Владение навыком"
            description: "Выберите один навык для владения"
            max_choices: 1
          
          - type: "feat_choice"
            name: "Черта"
            description: "Выберите одну черту"

  elf:
    name: "Эльф"
    description: "Древняя и изящная раса, живущая в гармонии с магией и природой. Эльфы живут столетиями, что дает им перспективу, недоступную короткоживущим расам. Они обладают утонченным восприятием мира, грацией и врожденной магической силой. Эльфы ценят искусство, музыку и природу, их движения плавны и точны, а взор пронзителен. Они превосходные лучники, следопыты и маги, чья связь с магическим потоком мира дает им преимущество в заклинаниях."
    
    bonuses:
      dexterity: 2
    
    # Общие особенности для всех эльфов
    features:
      - type: "trait"
        name: "Яркий ум"
        description: "Вы получаете преимущество на спасброски от очарования"
        effect: "advantage_charm_save"
      
      - type: "trait"
        name: "Медитация вместо сна"
        description: "Вы можете медитировать вместо сна в течение того же периода"
        effect: "meditation_instead_sleep"
      
      - type: "trait"
        name: "Видимость в сумерках"
        description: "Вы видите в условиях слабого освещения на 60 футов"
        effect: "darkvision_60"
      
      - type: "trait"
        name: "Поиск секретов"
        description: "Вы получаете преимущество на проверки Интеллекта (Магия) для поиска секретов"
        effect: "advantage_magic_check"
      
      - type: "proficiency"
        name: "Владение оружием"
        description: "Вы владеете длинными мечами, короткими мечами, луками и арбалетами"
        weapons: ["longsword", "shortsword", "longbow", "shortbow"]
      
      - type: "language"
        name: "Языки"
        description: "Вы можете говорить, читать и писать на Общем и Эльфийском"
        languages: ["common", "elvish"]
    
    subraces:
      high_elf:
        name: "Высокий эльф"
        description: "Аристократы эльфийского общества, хранители древних знаний и магических традиций. Высокие эльфы проводят столетия в изучении тайн магии, философии и искусства. Они обладают острым умом, врожденной способностью к колдовству и утонченными манерами."
        inherit_bonuses: true
        
        bonuses:
          intelligence: 1
        
        features:
          - type: "spell"
            name: "Заклинание высокого эльфа"
            description: "Вы можете создавать одно заговор по вашему выбору"
            spells: ["cantrip_choice"]
            ability: "intelligence"
          
          - type: "language"
            name: "Дополнительный язык"
            description: "Вы можете выбрать один дополнительный язык"
            languages: ["choice_1"]
      
      wood_elf:
        name: "Лесной эльф"
        description: "Хранители древних лесов и диких земель. Лесные эльфы живут в гармонии с природой, их дома - живые деревья, а дороги - лесные тропы. Они превосходные следопыты, охотники и защитники дикой природы. Их чувства обострены до предела, они могут читать следы, невидимые другим, и двигаться сквозь густую чащу без единого звука."
        inherit_bonuses: true
        
        bonuses:
          wisdom: 1
        
        features:
          - type: "trait"
            name: "Быстрое движение"
            description: "Ваша базовая скорость движения составляет 35 футов"
            effect: "speed_35"
          
          - type: "proficiency"
            name: "Владение оружием"
            description: "Вы владеете копьями, трезубцами и булавами в дополнение к базовому владению оружием эльфов"
            weapons: ["spear", "trident", "club"]
          
          - type: "mask_wilderness"
            name: "Маскировка в дикой местности"
            description: "Вы можете предпринять попытку скрыться, даже если вас прикрывает только естественное укрытие"

  half_orc:
    name: "Полуорк"
    description: "Рожденные от союза людей и орков, полуорки несут в себе силу обоих народов. Они часто сталкиваются с предрассудками, но их воля к выживанию и невероятная физическая мощь делают их грозными воинами и защитниками. Полуорки обладают врожденной яростью в бою, способной решать исход схватки, и удивительной стойкостью, позволяющей выдерживать ранения, которые убили бы обычного человека. Несмотря на свою грозную внешность, многие полуорки ищут свое место в мире и доказывают, что сила не всегда означает жестокость."
    
    bonuses:
      strength: 2
      constitution: 1
    
    features:
      - type: "trait"
        name: "Ярость"
        description: "В свой ход вы можете войти в ярость, получая временное здоровье и бонус к урону"
        effect: "rage_ability"
      
      - type: "trait"
        name: "Стойкость"
        description: "Когда ваше здоровье падает до 0, но не убивает вас, вы остаетесь в сознании с 1 здоровьем"
        effect: "relentless_endurance"
      
      - type: "language"
        name: "Языки"
        description: "Вы можете говорить, читать и писать на Общем и Орчьем"
        languages: ["common", "orcish"]
    
    subraces: {}  # У полуорков нет подрас

# Модификации (для будущих расширений)
modifications:
  # Пример модификации от мода high_level_mod
  example_mod:
    name: "Продвинутые расы"
    description: "Модификация, добавляющая продвинутые варианты рас"
    affects_races: ["human", "elf", "half_orc"]
    
    changes:
      human:
        bonuses:
          strength: 2  # Увеличиваем бонус силы
          dexterity: 2  # Увеличиваем бонус ловкости
        
        features:
          - type: "trait"
            name: "Адаптивность"
            description: "Вы можете менять один бонус к характеристикам раз в день"
            effect: "adaptive_bonuses"
      
      elf:
        subraces:
          moon_elf:
            name: "Лунный эльф"
            description: "Эльфы, черпающие силу от луны"
            inherit_bonuses: true
            bonuses:
              wisdom: 1
            features:
              - type: "spell"
                name: "Лунная магия"
                description: "Вы получаете доступ к заклинаниям школы иллюзий"
                spells: ["moon_magic"]
