# game/data/schemas/character_schema.yaml
# JSON Schema для валидации сохранений персонажей

character_schema:
  type: object
  required:
    - name
    - race
    - class
    - level
    - abilities
    - hp_max
    - hp_current
    - created_at

  properties:
    name:
      type: string
      minLength: 2
      maxLength: 30
      description: "Имя персонажа"

    race:
      type: string
      description: "ID расы персонажа"

    class:
      type: string
      description: "ID класса персонажа"

    level:
      type: integer
      minimum: 1
      maximum: 20
      description: "Уровень персонажа"

    experience:
      type: integer
      minimum: 0
      description: "Очки опыта"

    abilities:
      type: object
      required:
        - strength
        - dexterity
        - constitution
        - intelligence
        - wisdom
        - charisma
      properties:
        strength:
          type: integer
          minimum: 1
          maximum: 30
        dexterity:
          type: integer
          minimum: 1
          maximum: 30
        constitution:
          type: integer
          minimum: 1
          maximum: 30
        intelligence:
          type: integer
          minimum: 1
          maximum: 30
        wisdom:
          type: integer
          minimum: 1
          maximum: 30
        charisma:
          type: integer
          minimum: 1
          maximum: 30
      description: "Характеристики персонажа"

    hp_max:
      type: integer
      minimum: 1
      description: "Максимальные хиты"

    hp_current:
      type: integer
      description: "Текущие хиты"

    armor_class:
      type: integer
      minimum: 0
      description: "Класс доспеха"

    inventory:
      type: array
      items:
        type: object
        properties:
          item_id:
            type: string
          quantity:
            type: integer
            minimum: 1
      description: "Инвентарь персонажа"

    gold:
      type: integer
      minimum: 0
      description: "Золото"

    skills:
      type: array
      items:
        type: string
      description: "Владение навыками"

    equipment:
      type: object
      description: "Экипированные предметы"
      properties:
        weapon_main_hand:
          type: ["string", "null"]
        weapon_off_hand:
          type: ["string", "null"]
        armor:
          type: ["string", "null"]
        helmet:
          type: ["string", "null"]
        boots:
          type: ["string", "null"]
        gloves:
          type: ["string", "null"]
        rings:
          type: array
          maxItems: 2

    spells:
      type: object
      description: "Заклинания (для магических классов)"
      properties:
        known_spells:
          type: array
          items:
            type: string
        prepared_spells:
          type: array
          items:
            type: string
        spell_slots:
          type: object

    created_at:
      type: string
      format: date-time
      description: "Дата создания персонажа"

    playtime_seconds:
      type: integer
      minimum: 0
      description: "Время игры в секундах"

    race_data:
      type: object
      description: "Данные расы"

    class_data:
      type: object
      description: "Данные класса"