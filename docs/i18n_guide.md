# –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (i18n) –≤ D&D MUD

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º YAML —Ñ–∞–π–ª–æ–≤ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ—Å—Ç–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
dnd_mud/
‚îú‚îÄ‚îÄ localization/              # –§–∞–π–ª—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ ru.yaml              # –†—É—Å—Å–∫–∏–π —è–∑—ã–∫ (–æ—Å–Ω–æ–≤–Ω–æ–π)
‚îÇ   ‚îî‚îÄ‚îÄ en.yaml              # –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
‚îú‚îÄ‚îÄ i18n.py                   # –ú–µ–Ω–µ–¥–∂–µ—Ä –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ src/                      # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º t()
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–∞

```python
from i18n import t

# –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
print(t('main.welcome.title'))

# –°—Ç—Ä–æ–∫–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
name = "–ò–≥—Ä–æ–∫"
print(t('main.welcome.greeting', name=name))

# –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏
print(t('main.menu.new_game'))
```

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —è–∑—ã–∫–∞

```python
from i18n import set_language, get_current_language

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —è–∑—ã–∫
set_language('en')  # –ê–Ω–≥–ª–∏–π—Å–∫–∏–π
set_language('ru')  # –†—É—Å—Å–∫–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

# –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫
current_lang = get_current_language()
print(f'–¢–µ–∫—É—â–∏–π —è–∑—ã–∫: {current_lang}')
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —è–∑—ã–∫–æ–≤

```python
from i18n import get_available_languages

languages = get_available_languages()
print(f'–î–æ—Å—Ç—É–ø–Ω—ã–µ —è–∑—ã–∫–∏: {languages}')
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ YAML —Ñ–∞–π–ª–æ–≤

### –§–æ—Ä–º–∞—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

```yaml
# localization/ru.yaml
main:
  welcome:
    title: "D&D MUD"
    version: "–í–µ—Ä—Å–∏—è 1.0.0"
    press_enter: "–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è..."
    interrupted: "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞"
  menu:
    new_game: "–ù–æ–≤–∞—è –∏–≥—Ä–∞"
    load_game: "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É"
    settings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
    exit: "–í—ã—Ö–æ–¥"

character_creation:
  race:
    select: "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å—É:"
    human: "–ß–µ–ª–æ–≤–µ–∫"
    elf: "–≠–ª—å—Ñ"
    half_orc: "–ü–æ–ª—É–æ—Ä–∫"

ability_generation:
  methods:
    standard_array: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞—Å—Å–∏–≤"
    point_buy: "–ü–æ–∫—É–ø–∫–∞ –æ—á–∫–æ–≤"
    random: "–°–ª—É—á–∞–π–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è"
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏

```yaml
messages:
  welcome: "–ü—Ä–∏–≤–µ—Ç, {name}!"
  score_info: "{ability}: {base} + {bonus} = {total}"
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```python
print(t('messages.welcome', name='–ò–≥—Ä–æ–∫'))
print(t('messages.score_info', ability='–°–∏–ª–∞', base=14, bonus=2, total=16))
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú–µ–Ω–µ–¥–∂–µ—Ä –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

–ö–ª–∞—Å—Å `I18nManager` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
- –ó–∞–≥—Ä—É–∑–∫—É YAML —Ñ–∞–π–ª–æ–≤ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä–µ–≤–æ–¥–∞–º
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏–º —è–∑—ã–∫–æ–º
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ YAML –ø–æ–¥—Ö–æ–¥–∞

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –õ–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- **–ò–µ—Ä–∞—Ä—Ö–∏—è** - –í–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª—é—á–µ–π
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫
- **–ù–µ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏** - –ù–µ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ —Å–±–æ—Ä–∫–∏

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ YAML —Ñ–∞–π–ª–∞

```bash
cp localization/ru.yaml localization/en.yaml
```

### 2. –ü–µ—Ä–µ–≤–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `localization/en.yaml`:

```yaml
main:
  welcome:
    title: "D&D MUD"
    version: "Version 1.0.0"
    press_enter: "Press Enter to continue..."
    interrupted: "Program interrupted"
  menu:
    new_game: "New Game"
    load_game: "Load Game"
    settings: "Settings"
    exit: "Exit"
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —è–∑—ã–∫–æ–≤

–î–æ–±–∞–≤—å—Ç–µ —è–∑—ã–∫ –≤ `i18n.py` –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

```python
SUPPORTED_LANGUAGES = ['ru', 'en']
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ –≤ –∫–æ–¥:

### 1. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–∏ –≤ YAML —Ñ–∞–π–ª—ã

```yaml
# localization/ru.yaml
new_feature:
  title: "–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è"
  description: "–û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏"

# localization/en.yaml  
new_feature:
  title: "New Feature"
  description: "Description of new feature"
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∫–æ–¥–µ

```python
print(t('new_feature.title'))
print(t('new_feature.description'))
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ

```python
# –ü—Ä–æ—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
print(t('main.menu.new_game'))

# –°—Ç—Ä–æ–∫–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
name = '–ò–≥—Ä–æ–∫'
print(t('messages.welcome', name=name))

# –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏
print(t('character_creation.race.select'))
```

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

```python
# –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
print(t('main.greeting') + ' ' + t('main.name'))

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ f-—Å—Ç—Ä–æ–∫ —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º
name = '–ò–≥—Ä–æ–∫'
print(f'{t("main.greeting")} {name}')  # –ü–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞

# –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á–∞
print(t('nonexistent.key'))  # –í—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É
```

### üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–µ—á–Ω—É—é –Ω–æ—Ç–∞—Ü–∏—é** –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
2. **–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏** –ø–æ –º–æ–¥—É–ª—è–º
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏** –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ
4. **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏** –≤–º–µ—Å—Ç–æ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏
5. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** –º–µ–∂–¥—É —è–∑—ã–∫–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
6. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏** –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–∞ –≤ YAML —Ñ–∞–π–ª–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∏–µ—Ä–∞—Ä—Ö–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–ø–µ—á–∞—Ç–∫–∏ –≤ –∫–ª—é—á–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ YAML —Ñ–∞–π–ª—ã –≤ UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º–Ω—É—é –ª–æ–∫–∞–ª—å

### –ü—Ä–æ–±–ª–µ–º–∞: –Ø–∑—ã–∫ –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ YAML —Ñ–∞–π–ª–∞ –¥–ª—è —è–∑—ã–∫–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —è–∑—ã–∫ –≤ —Å–ø–∏—Å–∫–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `PyYAML>=6.0` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å YAML —Ñ–∞–π–ª–∞–º–∏
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ—Å—Ç–∞–º–∏

```python
import pytest
from i18n import set_language

def test_russian_text():
    set_language('ru')
    assert t('main.menu.new_game') == "–ù–æ–≤–∞—è –∏–≥—Ä–∞"

def test_english_text():
    set_language('en')
    assert t('main.menu.new_game') == "New Game"
```

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª–Ω–æ—Ç—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤:

```python
# scripts/validate_i18n.py
from i18n import get_available_languages
import yaml

def validate_translations():
    languages = get_available_languages()
    ru_keys = get_all_keys('localization/ru.yaml')
    
    for lang in languages:
        if lang == 'ru':
            continue
        lang_keys = get_all_keys(f'localization/{lang}.yaml')
        missing = ru_keys - lang_keys
        if missing:
            print(f"–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è {lang}: {missing}")
```

---

**D&D MUD i18n** - –ø—Ä–æ—Å—Ç–∞—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
